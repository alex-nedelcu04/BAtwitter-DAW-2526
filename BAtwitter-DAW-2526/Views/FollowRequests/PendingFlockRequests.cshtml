@model BAtwitter_DAW_2526.Models.Flock

<ul class="nav nav-tabs mb-3" id="tabs_flockReqs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#received" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Pending Join Requests</button>
    </li>
</ul>

<div class="tab-content" id="tabs_flockReqs_content">
    <div class="tab-pane fade show active" id="received" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
        @if (ViewBag.PendingRequests != null)
        {
            @foreach (var request in ViewBag.PendingRequests)
            {
                <div class="card shadow-sm mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <div>
                                <h5 class="mb-0">
                                    <a href="@Url.Action("Show", "UserProfiles", new { username = request.SenderUser?.ApplicationUser?.UserName })"
                                       class="text-decoration-none">
                                        @request.SenderUser?.DisplayName
                                    </a>
                                </h5>
                                <small class="text-muted">@@@request.SenderUser?.ApplicationUser?.UserName</small>
                            </div>
                            <div class="d-flex gap-2">
                                @if (Model != null)
                                {
                                    <form method="post" asp-action="AcceptFlockJoinRequest" asp-route-flockId="@Model.Id" asp-route-userId="@request.SenderUserId">
                                        <button class="btn btn-success" type="submit">Accept</button>
                                    </form>
                                    <form method="post" asp-action="RejectFlockJoinRequest" asp-route-flockId="@Model.Id" asp-route-userId="@request.SenderUserId">
                                        <button class="btn btn-danger" type="submit">Reject</button>
                                    </form>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
    </div>
</div>
